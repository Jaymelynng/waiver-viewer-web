<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Waiver Hub</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #737373;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      color: #1f2937;
      min-height: 100vh;
    }

    /* ── APP HEADER (centered, concept colors) ── */
    .app-header {
      background: linear-gradient(135deg, #5a5a5a 0%, #737373 100%);
      border-bottom: 2px solid #b48f8f;
      padding: 24px 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .app-header .header-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .app-header h1 {
      font-size: 26px;
      font-weight: 700;
      color: #ffffff;
      letter-spacing: -0.3px;
    }
    .app-header .subtitle {
      font-size: 14px;
      color: #e5e7eb;
      margin-top: 6px;
      max-width: 480px;
    }
    .back-btn {
      display: none;
      align-items: center;
      gap: 6px;
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      background: #b48f8f;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 0 #8b6f6f, 0 6px 12px rgba(0,0,0,0.25);
      transition: all 0.2s;
    }
    .back-btn:hover { transform: translateY(2px); box-shadow: 0 2px 0 #8b6f6f, 0 4px 8px rgba(0,0,0,0.25); }
    .back-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #8b6f6f; }
    .back-btn svg { width: 16px; height: 16px; }

    /* ── GYM SELECTOR GRID ── */
    .gym-grid {
      max-width: 1040px;
      margin: 0 auto;
      padding: 0 24px 40px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 14px;
      transition: opacity 0.3s, transform 0.3s;
    }
    .gym-grid.hidden { opacity: 0; transform: translateY(10px); pointer-events: none; position: absolute; }

    .section-title {
      max-width: 1040px;
      margin: 0 auto;
      padding: 32px 24px 14px;
      font-size: 12px;
      font-weight: 700;
      color: #e5e7eb;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    .gym-card {
      background: linear-gradient(145deg, #fafbfc 0%, #f0f2f5 100%);
      border: 2px solid #c4cad4;
      border-radius: 14px;
      padding: 18px 20px;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      gap: 16px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 6px 0 #c4cad4, 0 8px 20px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.8);
    }
    .gym-card::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 6px;
      background: var(--gym-color);
      border-radius: 14px 0 0 14px;
      transition: width 0.25s;
      box-shadow: 2px 0 8px rgba(0,0,0,0.15);
    }
    .gym-card:hover {
      border-color: var(--gym-color);
      transform: translateY(-3px);
      box-shadow: 0 8px 0 #c4cad4, 0 12px 28px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.9);
    }
    .gym-card:hover::before { width: 8px; }

    .gym-card .logo-wrap {
      width: 56px; height: 56px;
      border-radius: 12px;
      background: #e2e4e9;
      background: color-mix(in srgb, var(--gym-color) 22%, #e2e4e9);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.5);
      border: 1px solid rgba(0,0,0,0.06);
    }
    .gym-card .logo-wrap img {
      max-width: 48px; max-height: 48px;
      object-fit: contain;
    }
    .gym-card .gym-info h3 { font-size: 15px; font-weight: 700; color: #111827; margin-bottom: 4px; letter-spacing: -0.2px; }
    .gym-card .gym-info span { font-size: 12px; color: #4b5563; font-weight: 500; }
    .gym-card .arrow {
      margin-left: auto;
      color: #adb2c6;
      transition: color 0.2s, transform 0.2s;
      flex-shrink: 0;
    }
    .gym-card:hover .arrow { color: var(--gym-color); transform: translateX(3px); }

    /* ── WAIVER VIEWER ── */
    .viewer {
      max-width: 880px;
      margin: 0 auto;
      padding: 20px 24px 40px;
      display: none;
      animation: fadeIn 0.3s ease;
    }
    .viewer.active { display: block; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Toolbar with gym badge + buttons */
    .viewer-toolbar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .gym-badge {
      display: flex;
      align-items: center;
      gap: 12px;
      background: #e5e7eb;
      border: 2px solid #adb2c6;
      border-radius: 12px;
      padding: 12px 18px;
      flex: 1;
      min-width: 240px;
      box-shadow: 0 2px 0 #d1d5db;
    }
    .gym-badge img { width: 38px; height: 38px; object-fit: contain; border-radius: 6px; background: white; padding: 3px; }
    .gym-badge .badge-name { font-weight: 700; font-size: 16px; color: #1f2937; }
    .gym-badge .badge-sub { font-size: 11px; color: #737373; margin-top: 1px; }

    .dl-btn {
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
      white-space: nowrap;
      box-shadow: 0 4px 0 #16a34a, 0 6px 12px rgba(0,0,0,0.2);
    }
    .dl-btn.primary { background: #22c55e; color: white; }
    .dl-btn.primary:hover { transform: translateY(2px); box-shadow: 0 2px 0 #16a34a, 0 4px 8px rgba(0,0,0,0.2); }
    .dl-btn.primary:active { transform: translateY(4px); box-shadow: 0 0 0 #16a34a; }
    .dl-btn.secondary { background: #e5e7eb; color: #737373; border: 2px solid #adb2c6; box-shadow: 0 3px 0 #d1d5db; }
    .dl-btn.secondary:hover { background: #ffffff; color: #1f2937; }

    /* ── DOC TABS ── */
    .doc-tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 16px;
      background: #e5e7eb;
      padding: 4px;
      border-radius: 12px;
      border: 2px solid #adb2c6;
    }
    .doc-tab {
      flex: 1;
      padding: 10px 16px;
      border-radius: 10px;
      border: none;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
      background: transparent;
      color: #737373;
    }
    .doc-tab:hover { color: #1f2937; background: rgba(255,255,255,0.8); }
    .doc-tab.active { background: var(--gym-color, #b48f8f); color: white; box-shadow: 0 3px 0 rgba(0,0,0,0.2); }

    /* ── PAGE (document preview) ── */
    .page {
      background: white;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.3);
      font-family: 'Times New Roman', Georgia, serif;
      font-size: 10.5pt;
      line-height: 1.4;
      color: #000;
      max-height: 75vh;
      overflow-y: auto;
    }
    .page::-webkit-scrollbar { width: 8px; }
    .page::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 0 12px 12px 0; }
    .page::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
    .page::-webkit-scrollbar-thumb:hover { background: #999; }

    .page .branded-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 16px 28px;
      margin: -40px -40px 18px -40px;
      border-radius: 12px 12px 0 0;
    }
    .page .branded-header img {
      height: 48px; width: auto;
      object-fit: contain;
      background: rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 4px;
    }
    .page .branded-header .header-name {
      color: white;
      font-family: 'Segoe UI', sans-serif;
      font-size: 17pt;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      text-align: center;
      line-height: 1.2;
    }
    .page h1 {
      font-size: 11.5pt;
      text-align: center;
      margin: 0 0 8px;
      font-weight: bold;
      color: var(--gym-color, #1a1a1a);
    }
    .page h2 {
      font-family: 'Segoe UI', sans-serif;
      font-size: 10.5pt;
      font-weight: 700;
      margin: 14px 0 6px;
    }
    .page .warning {
      text-align: center;
      font-weight: bold;
      font-size: 10pt;
      margin: 0 0 10px;
      border: 2px solid var(--gym-warning-color, var(--gym-color, #1a1a1a));
      color: var(--gym-warning-color, var(--gym-color, #1a1a1a));
      padding: 8px 14px;
      border-radius: 5px;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    .page .policy-intro {
      text-align: center;
      font-size: 10pt;
      margin: 0 0 14px;
      border: 2px solid var(--gym-intro-color, var(--gym-color2, #1a1a1a));
      color: var(--gym-intro-color, var(--gym-color2, #1a1a1a));
      background: color-mix(in srgb, var(--gym-color2, #1e293b) 15%, white);
      padding: 12px 18px;
      border-radius: 8px;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    .page p { margin: 0 0 8px; text-align: justify; }
    .page ul, .page ol { margin: 6px 0 6px 24px; }
    .page ul li, .page ol li { margin-bottom: 4px; }
    .page .caps { font-weight: bold; }
    .page .indent { margin-left: 0.3in; margin-bottom: 6px; }
    .page .sig-area {
      margin-top: 16px;
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }
    .page .sig-line {
      border-bottom: 1px solid #000;
      flex: 1;
      padding-bottom: 2px;
      font-size: 9pt;
    }
    .page .sig-label { font-size: 8pt; margin-top: 2px; color: #555; }

    /* ── PRINT STYLES ── */
    @media print {
      @page { size: letter; margin: 0.47in; }
      body { background: white !important; }
      .app-header, .gym-grid, .section-title, .viewer-toolbar, .back-btn, .doc-tabs { display: none !important; }
      .viewer { padding: 0; max-width: none; }
      .page {
        box-shadow: none; border-radius: 0;
        padding: 0; margin: 0;
        max-height: none; overflow: visible;
      }
      .page .branded-header {
        margin: 0 0 14px 0;
        padding: 12px 16px;
        border-radius: 0;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .page .branded-header img { height: 40px !important; }
      .page .branded-header .header-name { font-size: 14pt !important; }
      .page h1 { font-size: 10pt !important; margin: 0 0 10px !important; color: var(--gym-color) !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .page h2 { font-size: 9.5pt !important; margin: 12px 0 6px !important; }
      .page .warning {
        font-size: 8.5pt !important;
        padding: 8px 12px !important;
        margin: 0 0 12px !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .page .policy-intro {
        margin: 0 0 14px !important;
        padding: 10px 16px !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .page p { margin: 0 0 8px !important; font-size: 9pt !important; line-height: 1.35 !important; }
      .page ul, .page ol { margin: 6px 0 8px 20px !important; }
      .page ul li, .page ol li { margin-bottom: 4px !important; font-size: 9pt !important; line-height: 1.35 !important; }
      .page .indent { margin-left: 0.25in !important; margin-bottom: 6px !important; }
      .page .sig-area { margin-top: 8px !important; gap: 12px !important; }
      .page .sig-line { font-size: 8pt !important; padding-bottom: 2px !important; }
      .page .sig-label { font-size: 8pt !important; margin-top: 2px !important; }
      /* Waiver: fit on one page — modest spacing tweaks (~2 sig lines) */
      .page.waiver .branded-header { padding: 8px 12px !important; margin-bottom: 10px !important; }
      .page.waiver .branded-header img { height: 34px !important; }
      .page.waiver .branded-header .header-name { font-size: 12.5pt !important; }
      .page.waiver h1 { font-size: 9.5pt !important; margin: 0 0 6px !important; }
      .page.waiver .warning { font-size: 8pt !important; padding: 5px 10px !important; margin: 0 0 8px !important; }
      .page.waiver p { font-size: 9pt !important; line-height: 1.28 !important; margin: 0 0 3px !important; }
      .page.waiver .indent { margin-bottom: 4px !important; }
      .page.waiver .sig-area { margin-top: 4px !important; }
      .page.waiver .sig-area + .sig-area { margin-top: 2px !important; }
      .page.waiver .sig-area + div { margin-top: 2px !important; }
      .page.waiver .sig-line { padding-bottom: 1px !important; }
      .page.waiver .sig-label { margin-top: 1px !important; }
    }

    /* ── TOAST ── */
    .toast {
      position: fixed; bottom: 24px; right: 24px;
      background: #b48f8f; color: white;
      padding: 14px 24px; border-radius: 12px;
      font-weight: 600; font-size: 14px;
      box-shadow: 0 4px 0 #8b6f6f, 0 8px 20px rgba(0,0,0,0.3);
      transform: translateY(100px); opacity: 0;
      transition: all 0.3s; z-index: 999;
    }
    .toast.show { transform: translateY(0); opacity: 1; }

    /* ── BULK DOWNLOAD BUTTON ── */
    .bulk-dl-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      background: #b48f8f;
      color: #ffffff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 0 #8b6f6f, 0 6px 12px rgba(0,0,0,0.25);
      transition: all 0.2s;
      white-space: nowrap;
      min-width: 120px;
      justify-content: center;
    }
    .bulk-dl-btn:hover { transform: translateY(2px); box-shadow: 0 2px 0 #8b6f6f, 0 4px 8px rgba(0,0,0,0.25); }
    .bulk-dl-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #8b6f6f; }
    .bulk-dl-btn.hidden { display: none; }

    /* ── BULK DOWNLOAD MODAL ── */
    .bulk-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      z-index: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s;
    }
    .bulk-modal-overlay.open {
      opacity: 1;
      pointer-events: all;
    }
    .bulk-modal {
      background: linear-gradient(160deg, #f5f0f0 0%, #ede8e8 100%);
      border-radius: 18px;
      width: 100%;
      max-width: 540px;
      max-height: 88vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 4px 0 #c4a8a8;
      border: 1px solid #d4c4c4;
      transform: scale(0.95) translateY(8px);
      transition: transform 0.25s;
      overflow: hidden;
    }
    .bulk-modal-overlay.open .bulk-modal {
      transform: scale(1) translateY(0);
    }
    .bulk-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px 16px;
      border-bottom: 1px solid #d4c4c4;
    }
    .bulk-modal-header h2 {
      font-size: 18px;
      font-weight: 700;
      color: #1f2937;
      margin: 0;
    }
    .bulk-modal-close {
      background: none;
      border: none;
      font-size: 24px;
      color: #9ca3af;
      cursor: pointer;
      padding: 0 4px;
      line-height: 1;
      transition: color 0.2s;
    }
    .bulk-modal-close:hover { color: #1f2937; }
    .bulk-modal-body {
      padding: 20px 24px;
      overflow-y: auto;
      flex: 1;
    }
    .bulk-section-label {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      color: #737373;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .bulk-select-controls {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-left: auto;
    }
    .bulk-link-btn {
      background: #e5e7eb;
      border: 1px solid #c4cad4;
      color: #4b5563;
      font-size: 11px;
      font-weight: 700;
      cursor: pointer;
      padding: 5px 12px;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.15s;
      text-transform: none;
      letter-spacing: 0;
    }
    .bulk-link-btn:hover { background: #b48f8f; color: white; border-color: #b48f8f; }
    .bulk-doc-toggle {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .bulk-toggle-opt {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: white;
      border: 2px solid #d1d5db;
      border-radius: 10px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      color: #4b5563;
      transition: all 0.15s;
    }
    .bulk-toggle-opt:has(input:checked) {
      border-color: #b48f8f;
      background: #f5eded;
      color: #1f2937;
    }
    .bulk-toggle-opt input { display: none; }
    .bulk-gym-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .bulk-gym-row {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.15s;
    }
    .bulk-gym-row:hover { border-color: #b48f8f; background: #fdf9f9; }
    .bulk-gym-row.checked { border-color: #b48f8f; background: #f5eded; }
    .bulk-gym-row .gym-color-dot {
      width: 10px; height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .bulk-gym-row .gym-row-name {
      font-size: 13px;
      font-weight: 600;
      color: #1f2937;
      flex: 1;
    }
    .bulk-gym-row .gym-row-abbr {
      font-size: 11px;
      color: #9ca3af;
      font-weight: 500;
    }
    .bulk-gym-checkbox {
      width: 17px; height: 17px;
      accent-color: #b48f8f;
      cursor: pointer;
      flex-shrink: 0;
    }

    /* ── BULK PROGRESS ── */
    .bulk-progress-area {
      padding: 0 24px 16px;
      border-top: 1px solid #e5e7eb;
      margin-top: 4px;
    }
    .bulk-progress-label {
      font-size: 12px;
      font-weight: 600;
      color: #4b5563;
      margin-bottom: 8px;
      margin-top: 12px;
    }
    .bulk-progress-bar-track {
      height: 6px;
      background: #e5e7eb;
      border-radius: 3px;
      overflow: hidden;
    }
    .bulk-progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #b48f8f, #c9a8a8);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    /* ── BULK MODAL FOOTER ── */
    .bulk-modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      padding: 16px 24px;
      border-top: 1px solid #d4c4c4;
    }
    .bulk-cancel-btn {
      padding: 10px 20px;
      border-radius: 10px;
      border: 2px solid #adb2c6;
      background: #e5e7eb;
      color: #4b5563;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }
    .bulk-cancel-btn:hover { background: white; color: #1f2937; }
    .bulk-download-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 22px;
      border-radius: 10px;
      border: none;
      background: #b48f8f;
      color: white;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 0 #8b6f6f;
      transition: all 0.2s;
    }
    .bulk-download-btn:hover { transform: translateY(2px); box-shadow: 0 2px 0 #8b6f6f; }
    .bulk-download-btn:active { transform: translateY(4px); box-shadow: 0 0 0 #8b6f6f; }
    .bulk-download-btn:disabled {
      background: #d1d5db;
      box-shadow: none;
      cursor: not-allowed;
      transform: none;
    }

    /* ── OFF-SCREEN RENDER ──
       Exact mirror of @media print rules, applied as regular CSS
       so html2canvas sees them. These must stay in sync with the
       print block above. ── */
    #bulkRenderContainer {
      position: fixed;
      top: -99999px;
      left: -99999px;
      background: white;
      z-index: -1;
      overflow: visible;
      pointer-events: none;
    }

    /* Container simulates the printable area:
       Letter = 8.5×11in, margins 0.47in each side
       Printable width  = 8.5 - 0.94 = 7.56in = 725.76px ≈ 726px
       Printable height = 11  - 0.94 = 10.06in = 965.76px ≈ 966px */
    .bulk-render-page {
      width: 726px;
      max-height: none !important;
      overflow: visible !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 0;
      margin: 0;
      font-family: 'Times New Roman', Georgia, serif;
      font-size: 9pt;
      line-height: 1.35;
      color: #000;
      background: white;
    }

    /* ── General print-equivalent rules (matches @media print .page) ── */
    .bulk-render-page .branded-header {
      margin: 0 0 14px 0;
      padding: 12px 16px;
      border-radius: 0;
    }
    .bulk-render-page .branded-header img { height: 40px; }
    .bulk-render-page .branded-header .header-name { font-size: 14pt; }
    .bulk-render-page h1 { font-size: 10pt; margin: 0 0 10px; text-align: center; font-weight: bold; }
    .bulk-render-page h2 { font-family: 'Segoe UI', sans-serif; font-size: 9.5pt; font-weight: 700; margin: 12px 0 6px; }
    .bulk-render-page .warning { font-size: 8.5pt; padding: 8px 12px; margin: 0 0 12px; font-weight: bold; text-align: center; border-width: 2px; border-style: solid; border-radius: 5px; }
    .bulk-render-page .policy-intro { margin: 0 0 14px; padding: 10px 16px; text-align: center; font-size: 10pt; border-width: 2px; border-style: solid; border-radius: 8px; }
    .bulk-render-page p { margin: 0 0 8px; font-size: 9pt; line-height: 1.35; text-align: justify; }
    .bulk-render-page ul, .bulk-render-page ol { margin: 6px 0 8px 20px; }
    .bulk-render-page ul li, .bulk-render-page ol li { margin-bottom: 4px; font-size: 9pt; line-height: 1.35; }
    .bulk-render-page .caps { font-weight: bold; }
    .bulk-render-page .indent { margin-left: 0.25in; margin-bottom: 6px; }
    .bulk-render-page .sig-area { margin-top: 8px; display: flex; justify-content: space-between; gap: 12px; }
    .bulk-render-page .sig-line { border-bottom: 1px solid #000; flex: 1; padding-bottom: 2px; font-size: 8pt; }
    .bulk-render-page .sig-label { font-size: 8pt; margin-top: 2px; color: #555; }

    /* ── Waiver-specific: fit on ONE page ──
       Tuned between @media print values and tighter overrides
       to fill the page without spilling. ── */
    .bulk-render-page.waiver .branded-header { padding: 7px 12px; margin-bottom: 9px; }
    .bulk-render-page.waiver .branded-header img { height: 33px; }
    .bulk-render-page.waiver .branded-header .header-name { font-size: 12.5pt; }
    .bulk-render-page.waiver h1 { font-size: 9.5pt; margin: 0 0 5px; }
    .bulk-render-page.waiver .warning { font-size: 8pt; padding: 5px 10px; margin: 0 0 7px; }
    .bulk-render-page.waiver p { font-size: 8.8pt; line-height: 1.26; margin: 0 0 2.5px; }
    .bulk-render-page.waiver .indent { margin-bottom: 3px; }
    .bulk-render-page.waiver .sig-area { margin-top: 4px; }
    .bulk-render-page.waiver .sig-area + .sig-area { margin-top: 2px; }
    .bulk-render-page.waiver .sig-area + div { margin-top: 2px; }
    .bulk-render-page.waiver .sig-line { padding-bottom: 1px; }
    .bulk-render-page.waiver .sig-label { margin-top: 1px; }

    /* Hide bulk button and modal from print */
    @media print {
      .bulk-dl-btn, .bulk-modal-overlay, #bulkRenderContainer { display: none !important; }
    }

  </style>
</head>
<body>

<!-- ====== APP HEADER ====== -->
<div class="app-header">
  <div style="width:120px;"></div>
  <div class="header-content">
    <h1>Waiver Hub</h1>
    <div class="subtitle">View, download, or bulk export gym waivers and policies as PDF</div>
    <button class="bulk-dl-btn" id="bulkDlBtn" onclick="openBulkModal()" style="margin-top:12px;">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><path d="M3 15v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      Bulk Download
    </button>
  </div>
  <button class="back-btn" id="backBtn" onclick="showGrid()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
    All Gyms
  </button>
</div>

<!-- ====== GYM GRID ====== -->
<div class="section-title" id="gridTitle">Select a Gym</div>
<div class="gym-grid" id="gymGrid"></div>

<!-- ====== DOCUMENT VIEWER ====== -->
<div class="viewer" id="viewer">
  <div class="viewer-toolbar" id="toolbar"></div>
  <div class="doc-tabs" id="docTabs"></div>
  <div class="page" id="docPage"></div>
</div>

<!-- ====== BULK DOWNLOAD MODAL ====== -->
<div class="bulk-modal-overlay" id="bulkModalOverlay" onclick="closeBulkModalIfOverlay(event)">
  <div class="bulk-modal" id="bulkModal">
    <div class="bulk-modal-header">
      <h2>Bulk Download</h2>
      <button class="bulk-modal-close" onclick="closeBulkModal()" aria-label="Close">&times;</button>
    </div>
    <div class="bulk-modal-body">
      <div class="bulk-section-label">Document Type</div>
      <div class="bulk-doc-toggle">
        <label class="bulk-toggle-opt"><input type="radio" name="bulkDocType" value="waiver" checked> Waiver Only</label>
        <label class="bulk-toggle-opt"><input type="radio" name="bulkDocType" value="policy"> Policy Only</label>
        <label class="bulk-toggle-opt"><input type="radio" name="bulkDocType" value="both"> Both</label>
      </div>
      <div class="bulk-section-label" style="margin-top:16px;">
        Select Gyms
        <span class="bulk-select-controls">
          <button class="bulk-link-btn" onclick="bulkSelectAll(true)">Select All</button>
          <button class="bulk-link-btn" onclick="bulkSelectAll(false)">Deselect All</button>
        </span>
      </div>
      <div class="bulk-gym-list" id="bulkGymList"></div>
    </div>
    <div class="bulk-progress-area" id="bulkProgressArea" style="display:none;">
      <div class="bulk-progress-label" id="bulkProgressLabel">Preparing...</div>
      <div class="bulk-progress-bar-track">
        <div class="bulk-progress-bar-fill" id="bulkProgressBarFill" style="width:0%"></div>
      </div>
    </div>
    <div class="bulk-modal-footer">
      <button class="bulk-cancel-btn" onclick="closeBulkModal()">Cancel</button>
      <button class="bulk-download-btn" id="bulkDownloadBtn" onclick="startBulkDownload()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Download ZIP
      </button>
    </div>
  </div>
</div>

<!-- Off-screen render container -->
<div id="bulkRenderContainer" aria-hidden="true"></div>

<div class="toast" id="toast"></div>

<script>
const GYMS = [
  { name: 'Capital Gymnastics Cedar Park',  abbr: 'CCP', color: '#1f53a3', color2: '#bf0a30', logo: 'Capital classic colors with circle shadow (1).png', email: 'info@capgymcpk.com', fee: '55', domain: 'capgymcpk.com' },
  { name: 'Capital Gymnastics Pflugerville', abbr: 'CPF', color: '#1f53a3', color2: '#bf0a30', logo: 'Capital classic colors with circle shadow (1).png', email: 'info@capgympfl.com', fee: '55', domain: 'capgympfl.com' },
  { name: 'Capital Gymnastics Round Rock',   abbr: 'CRR', color: '#ff1493', color2: '#c0c0c0', logo: 'RR pink circle no shadow (1).png', email: 'info@capgymrnd.com', fee: '55', domain: 'capgymrnd.com' },
  { name: 'Rowland Ballard - Atascocita',    abbr: 'RBA', color: '#1a3c66', color2: '#c52928', logo: 'rba_rbk 250x250 (1).png', email: 'info@rbatascocita.com', fee: '50', domain: 'rbatascocita.com' },
  { name: 'Rowland Ballard - Kingwood',      abbr: 'RBK', color: '#1a3c66', color2: '#c52928', logo: 'rba_rbk 250x250 (1).png', email: 'info@rbkingwood.com', fee: '50', domain: 'rbkingwood.com' },
  { name: 'Houston Gymnastics Academy',      abbr: 'HGA', color: '#c91724', color2: '#262626', logo: 'hga logo 250x250.png', email: 'info@houstongymnastics.com', fee: '55', domain: 'houstongymnastics.com' },
  { name: 'Estrella Gymnastics',             abbr: 'EST', color: '#011837', color2: '#666666', logo: 'Estrella 2025 Logo Rebranded (1).png', email: 'info@estrellagym.com', fee: '55', domain: 'estrellagym.com' },
  { name: 'Oasis Gymnastics',                abbr: 'OAS', color: '#3eb29f', color2: '#3eb29f', logo: 'oasiss.png', email: 'info@oasisgym.com', fee: '55', domain: 'oasisgym.com' },
  { name: 'Scottsdale Gymnastics',           abbr: 'SGT', color: '#c72b12', color2: '#e6e6e6', logo: 'sgt logo 200.png', email: 'info@scottsdalegymnastics.com', fee: '55', domain: 'scottsdalegymnastics.com' },
  { name: 'Tigar Gymnastics',                abbr: 'TIG', color: '#f57f20', color2: '#0a3651', logo: 'tigar logo.png', email: 'info@tigargym.com', fee: '55', domain: 'tigargym.com' }
];

let currentGym = null;
let currentDoc = 'waiver';

/* Override warning text color for gyms with light brand colors (SGT=Scottsdale, CRR=Capital Round Rock) */
const WARNING_COLOR_OVERRIDES = { SGT: '#000', CRR: '#000' };
const POLICY_INTRO_COLOR_OVERRIDES = { SGT: '#000', CRR: '#000' };

/* ═══════════════ BUILD GYM GRID ═══════════════ */
function buildGrid() {
  document.getElementById('gymGrid').innerHTML = GYMS.map((g, i) => `
    <div class="gym-card" style="--gym-color:${g.color}" onclick="selectGym(${i})">
      <div class="logo-wrap">
        <img src="${g.logo}" onerror="this.parentElement.innerHTML='<div style=\\'font-size:20px;font-weight:800;color:${g.color}\\'>${g.abbr}</div>'">
      </div>
      <div class="gym-info">
        <h3>${g.name}</h3>
        <span>${g.abbr} &bull; Waiver Hub</span>
      </div>
      <div class="arrow"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg></div>
    </div>
  `).join('');
}

/* ═══════════════ SELECT A GYM ═══════════════ */
function selectGym(idx) {
  currentGym = idx;
  const gym = GYMS[idx];

  document.getElementById('gymGrid').classList.add('hidden');
  document.getElementById('gridTitle').style.display = 'none';
  document.getElementById('viewer').classList.add('active');
  document.getElementById('viewer').style.setProperty('--gym-color', gym.color);
  document.getElementById('viewer').style.setProperty('--gym-color2', gym.color2 || gym.color);
  document.getElementById('viewer').style.setProperty('--gym-warning-color', WARNING_COLOR_OVERRIDES[gym.abbr] || gym.color2 || gym.color);
  document.getElementById('viewer').style.setProperty('--gym-intro-color', POLICY_INTRO_COLOR_OVERRIDES[gym.abbr] || gym.color2 || gym.color);
  document.getElementById('backBtn').style.display = 'flex';
  document.getElementById('bulkDlBtn').classList.add('hidden');

  // Toolbar
  document.getElementById('toolbar').innerHTML = `
    <div class="gym-badge">
      <img src="${gym.logo}" onerror="this.style.display='none'">
      <div>
        <div class="badge-name">${gym.name}</div>
        <div class="badge-sub">${gym.abbr} &bull; ${gym.email}</div>
      </div>
    </div>
    <button class="dl-btn primary" onclick="window.print()" title="Print — choose Save as PDF to download">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      Download PDF
    </button>
  `;

  // Doc tabs
  document.getElementById('docTabs').innerHTML = `
    <button class="doc-tab ${currentDoc==='waiver'?'active':''}" style="--gym-color:${gym.color}" onclick="switchDoc('waiver')">Release &amp; Waiver</button>
    <button class="doc-tab ${currentDoc==='policy'?'active':''}" style="--gym-color:${gym.color}" onclick="switchDoc('policy')">Policies &amp; Procedures</button>
  `;

  renderDoc();
  updatePageTitle();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ═══════════════ SWITCH DOCUMENT ═══════════════ */
function switchDoc(doc) {
  currentDoc = doc;
  const gym = GYMS[currentGym];
  document.querySelectorAll('.doc-tab').forEach(t => {
    t.classList.toggle('active', t.textContent.toLowerCase().includes(doc === 'waiver' ? 'waiver' : 'policies'));
  });
  renderDoc();
  updatePageTitle();
  document.getElementById('docPage').scrollTop = 0;
}

/* ═══════════════ PAGE TITLE (for PDF filename) ═══════════════ */
function updatePageTitle() {
  if (currentGym === null) {
    document.title = 'Waiver Hub';
  } else {
    const gym = GYMS[currentGym];
    const docName = currentDoc === 'waiver' ? 'Release & Waiver' : 'Policies & Procedures';
    document.title = `${gym.name} - ${docName}`;
  }
}

/* ═══════════════ RENDER DOCUMENT ═══════════════ */
function renderDoc() {
  const gym = GYMS[currentGym];
  const page = document.getElementById('docPage');
  page.classList.remove('waiver', 'policy');
  if (currentDoc === 'waiver') {
    page.classList.add('waiver');
    page.innerHTML = getWaiverHTML(gym);
  } else {
    page.classList.add('policy');
    page.innerHTML = getPolicyHTML(gym);
  }
}

/* ═══════════════ WAIVER HTML ═══════════════ */
function getWaiverHTML(gym) {
  return `
<div class="branded-header" style="background:${gym.color};">
  <img src="${gym.logo}" onerror="this.style.display='none'">
  <div class="header-name">${gym.name}</div>
</div>
<h1${gym.abbr==='OAS'?' style="color:#3e266b !important"':''}>RELEASE OF LIABILITY, WAIVER OF CLAIMS, ASSUMPTION OF RISK,<br>INDEMNITY, MEDICAL CERTIFICATION, AND CONSENT TO MEDICAL TREATMENT AGREEMENT</h1>
<div class="warning">BY SIGNING THIS AGREEMENT, YOU WILL WAIVE CERTAIN LEGAL RIGHTS, INCLUDING THE RIGHT TO SUE. PLEASE READ CAREFULLY!</div>
<p>I, the enrolled participant and/or the parent/guardian of the participant, desire to participate in gymnastics, cheer, dance, or ninja lessons, gymnastics, cheer, dance, or ninja classes, camps, parties, and/or other gym-related activities (\u201CActivities\u201D) offered by <strong>${gym.name}</strong> (\u201CCompany\u201D) and, in consideration for being permitted by the Company to participate in the Activities, agree to all the terms and conditions set forth in this agreement (\u201CAgreement\u201D).</p>
<p><span class="caps">ASSUMPTION OF RISK. I UNDERSTAND THAT GYMNASTICS INVOLVES HIGH-IMPACT, HIGH-VELOCITY ACTIVITIES AND EQUIPMENT, INCLUDING BUT NOT LIMITED TO BALANCE BEAMS, BARS, FOAM PITS, TRAMPOLINES, AND VAULTING BOARDS. I AM AWARE THAT THESE ACTIVITIES INVOLVE THE RISK OF SERIOUS INJURY, DISABILITY, DEATH, PROPERTY DAMAGE, AND INFECTION BY COMMUNICABLE DISEASE (INCLUDING, WITHOUT LIMITATION, COVID-19, HEPATITIS A, B AND C, AND INFLUENZA, AMONG OTHERS).</span></p>
<p><strong>WAIVER, RELEASE, AGREEMENT NOT TO SUE, AND INDEMNIFICATION:</strong> In consideration for allowing participation in the Activities, and with knowledge of the dangers and risks involved, I, on behalf of myself or, as applicable, all minors and other participants on behalf of whom I sign this agreement, and for ourselves, our families, heirs, executors, estates, and administrators (\u201CReleasors\u201D) voluntarily waive and release any and all actions, causes of action, attorneys\u2019 fees, costs, expenses, suits, debts, dues, sums of money, accounts, reckonings, bonds, bills, specialties, covenants, contracts, controversies, agreements, promises, penalties, variances, trespasses, judgments, extent, executions, claims, and demands whatsoever, in law or equity, whether known or unknown, foreseen or unforeseen (\u201CClaims\u201D) against the Company, or its members, managers, officers, employees, agents, affiliates, successors and assigns (\u201CReleasees\u201D), arising out of or related to participation in the Activities, use of or presence at the facilities, and any administration of care, including, without limitation, claims of injury or death, whether arising out of the negligence of the Company or the Releasees or otherwise to the fullest extent allowed by law. Also, I, on behalf of myself and the Releasors, covenant, to the fullest extent allowed by law, not to make or bring any such Claims against the Company or the Releasees, and forever release, discharge, indemnify, and hold the Company and all Releasees harmless from all liability, losses, and damages under such Claims, and all expenses (including, without limitation, attorneys\u2019 fees) incurred in defending any such Claims.</p>
<p>I acknowledge that there is a possibility that subsequent to the execution of this Agreement and any amendments thereto, I may discover facts or incur or suffer claims which were unknown or unsuspected at the time the Agreement or the applicable amendment was executed, and which if known by me at that time may have materially affected my decision to execute the Agreement or any amendments thereto. I acknowledge and agree that I am assuming any risk of such unknown facts and such unknown and unsuspected claims and, accordingly, I waive my rights under California Civil Code section 1542 and any other similar laws of other jurisdictions. SECTION 1542 OF THE CALIFORNIA CIVIL CODE STATES AS FOLLOWS:</p>
<p class="indent"><strong>A GENERAL RELEASE DOES NOT EXTEND TO CLAIMS THAT THE CREDITOR OR RELEASING PARTY DOES NOT KNOW OR SUSPECT TO EXIST IN HIS OR HER FAVOR AT THE TIME OF EXECUTING THE RELEASE AND THAT, IF KNOWN BY HIM OR HER, WOULD HAVE MATERIALLY AFFECTED HIS OR HER SETTLEMENT WITH THE DEBTOR OR RELEASED PARTY.</strong></p>
<p><strong>MEDICAL CERTIFICATION, CONSENT TO TREATMENT, AND RELEASE:</strong> I hereby certify that the participant who will participate in the Activities is in good physical health and has no medical condition(s) that would prevent full participation in the Activities. I have notified the Company in writing of any medical/health problems of which the Company\u2019s staff should be aware prior to the participant participating in the Activities. In the event of any medical emergencies, I authorize any representatives of the Company to take whatever actions such persons deem necessary to have the participant assisted or treated. Further, I agree to pay all costs associated with medical care for and transportation of the participant to a medical facility, as needed. If a participant comes under a physician\u2019s care during the course of instruction at the Company, it is my responsibility to notify the Company\u2019s main office before the start of any class. If a participant is under a physician\u2019s care while participating in any Activities, I must provide the Company with a doctor\u2019s release permitting the participant to participate in the Activities.</p>
<p><span class="caps">ACKNOWLEDGMENT/AUTHORITY: I ACKNOWLEDGE AND AGREE THAT I HAVE CAREFULLY READ AND UNDERSTOOD ALL OF THE TERMS OF THIS AGREEMENT AND AGREE TO IT FREELY AND VOLUNTARILY. I WARRANT THAT I HAVE THE AUTHORITY AND EXPRESS CONSENT TO SIGN THIS AGREEMENT ON MY OWN BEHALF AND ON BEHALF OF THE RELEASORS.</span></p>
<p><strong>SEVERABILITY:</strong> If any provision of this Agreement is found to be invalid, it shall be deemed severed from this Agreement, and the remaining provisions of this Agreement shall survive and remain in full force and effect.</p>
<div class="sig-area">
  <div style="flex:1;"><div class="sig-line">&nbsp;</div><div class="sig-label">Participant Name</div></div>
  <div style="flex:1;"><div class="sig-line">&nbsp;</div><div class="sig-label">Parent/Guardian Printed Name</div></div>
  <div style="flex:1;"><div class="sig-line">&nbsp;</div><div class="sig-label">Date of Birth (Participant)</div></div>
</div>
<div class="sig-area" style="margin-top:8px;">
  <div style="flex:2;"><div class="sig-line">&nbsp;</div><div class="sig-label">Phone Number</div></div>
  <div style="flex:2;"><div class="sig-line">&nbsp;</div><div class="sig-label">Email</div></div>
</div>
<div class="sig-area" style="margin-top:8px;">
  <div style="flex:2;"><div class="sig-line">&nbsp;</div><div class="sig-label">Parent/Guardian Signature</div></div>
  <div style="flex:1;"><div class="sig-line">&nbsp;</div><div class="sig-label">Date</div></div>
</div>`;
}

/* ═══════════════ POLICY HTML ═══════════════ */
function getPolicyHTML(gym) {
  return `
<div class="branded-header" style="background:${gym.color};">
  <img src="${gym.logo}" onerror="this.style.display='none'">
  <div class="header-name">${gym.name}</div>
</div>
<h1>POLICIES AND PROCEDURES</h1>

<div class="policy-intro"><p style="margin:0;">At <strong>${gym.name}</strong>, we are dedicated to providing a world-class gymnastics and athletic experience. We continuously invest in state-of-the-art facilities, equipment, and comprehensive coach training.</p></div>

<h2>Additional Guidelines:</h2>
<ul>
<li><strong>Anniversary Fees:</strong> This $${gym.fee} fee, which covers administrative services and membership benefits, is non-refundable.</li>
<li><strong>Missed Classes:</strong> No refunds will be issued for missed classes. A \u201Cmissed class\u201D is defined as any scheduled class that a customer does not attend without prior arrangement. However, if a customer marks themselves absent in their customer portal at least 24 hours prior to the class, they may attend a makeup class. A customer may mark themselves absent up to 12 times per year.</li>
<li><strong>Gym Cancellations:</strong> If a class is canceled by <strong>${gym.name}</strong>, we will reschedule the class to be completed within 30 days of the cancellation. To accommodate facility and instructor availability, the rescheduled lesson may be held on a different day and/or at a different time than your regularly scheduled class. While we will provide options for the makeup session, please note that specific days or times cannot be guaranteed. We may also provide makeup sessions in the form of other services of similar value, such as Open Gym or Kids Night Out events.</li>
</ul>

<p><strong>Modification Clause:</strong> <strong>${gym.name}</strong> reserves the right to modify, update, or change this refund policy at its sole discretion. Enrolled customers will be notified of any material changes via email at least 30 days prior to the effective date of the changes.</p>

<p><strong>Acknowledgement:</strong> By enrolling in our classes, you acknowledge that you have read, understood, and accept the terms of this refund policy.</p>

<h1>BILLING AGREEMENT</h1>

<p>All enrollments must be secured with payment before classes begin. Payments are accepted online, by phone, or in person at <strong>${gym.name}</strong>. Payment information must be kept up to date. If payment is declined (even after multiple attempts), enrollment will not be confirmed. When enrolling, a customer pays for a class in each week in the following month. When starting mid-month, the tuition will be prorated for the number of remaining weeks in the month. If a customer\u2019s selected class day falls on a holiday, the customer may attend a make-up class.</p>

<h2>Holidays Observed:</h2>
<ul>
<li>New Years Eve</li>
<li>New Years Day</li>
<li>Easter</li>
<li>Memorial Day</li>
<li>Independence Day</li>
<li>Labor Day</li>
<li>Thanksgiving</li>
<li>Day After Thanksgiving (Black Friday)</li>
<li>Christmas Eve</li>
<li>Christmas Day</li>
</ul>

<p>Class payments are automatically charged to the credit card on file on the 15th of the prior month. For example, payment for the month of June will be processed on May 15th.</p>
<ul>
<li>Dates may vary based on holidays.</li>
<li>A credit card on file is required for monthly payments.</li>
</ul>

<p><strong>IF PAYMENT IS NOT RECEIVED BY THE 1ST OF THE MONTH, THE ENROLLMENT WILL BE DROPPED AT THAT TIME.</strong></p>

<h2>ANNIVERSARY FEE</h2>
<ul>
<li>An <strong>$${gym.fee}</strong> annual, non-refundable anniversary fee is due in full as of the date of the first class a customer enrolls in, and on each yearly anniversary month thereafter. This fee is fixed and will not be subject to proration under any circumstances, including mid-month enrollments or drop requests.</li>
<li>This fee will automatically be added to your monthly payment once a year for the month in which it is due.</li>
<li>This fee is separate from tuition and is automatically added only once per year.</li>
</ul>

<h2>DROP REQUESTS</h2>
<ul>
<li>A 30 day notice is required to drop from a class.</li>
<li>Requests to drop from a class are accepted through the iClassPro customer portal, phone app, in person or by phone.</li>
<li>After the drop request has been approved, any enrollment will end 30 days from the date of the drop request.</li>
<li>Following a drop request, payment for the upcoming month will be prorated dependent upon the drop date.
  <ul><li>For example: A drop request is submitted on April 18th and approved. The last day of class will be May 18. When payments are processed for the month of May, the billed payment will only be for the number of classes between May 1-18.</li></ul>
</li>
</ul>

<h2>MAKEUP CLASSES</h2>

<p><strong>iClassPro Terminology:</strong> Please note that the iClassPro management system uses the term \u201Ctoken\u201D or \u201Ctokens\u201D when referring to makeup classes. That term was created and used by the iClassPro software developer, not <strong>${gym.name}</strong>. A token refers to a customer\u2019s opportunity to attend a makeup class as described in the Refund Policy and this Billing Agreement. A \u201Ctoken\u201D has no cash value and is not redeemable for cash.</p>

<p>To enroll in a makeup class, the customer must schedule themselves for a class in the customer portal, phone call or in person. Based on the required instructor-to-student ratio, <strong>${gym.name}</strong> cannot guarantee the availability of any particular makeup class. A customer may schedule makeup classes while actively enrolled. There will be no refund for missed makeup classes.</p>

<h2>ABSENT INSTRUCTOR POLICY</h2>
<p>When instructors are absent from any class, <strong>${gym.name}</strong> will provide a substitute instructor. This is not grounds for a refund or rescheduling the class.</p>

<h2>GYM SAFETY, DRESS CODE &amp; CONDUCT</h2>
<ul>
<li><strong>Dress Code:</strong> Leotards for Girls Gymnastics. Boys/Cheer/Tumbling/Ninja - Shorts and T-shirts without zippers, buttons, or any ornamentation that may injure a student or coach. Jewelry must not be worn during classes. Hair must be pulled up neatly and securely away from the face so that it stays up for the entire workout. Girls must not wear bows or other large hair ornaments that may cause discomfort during activity. Bare feet are required in the gym to prevent slipping.</li>
<li><strong>Supervision:</strong> For children aged six and under, it is mandatory for a parent/guardian to remain on the premises. Adults are never allowed on the equipment.</li>
<li><strong>Athlete Safety:</strong> We comply with USA Gymnastics (USAG) and SafeSport standards. Any adult with regular contact or authority over a minor has passed a background check and completed SafeSport training</li>
<li><strong>Food and Beverage:</strong> No food (including gum, candy) is allowed in the Gym; only water is allowed. Please remember to provide your child with a water bottle to stay hydrated.</li>
<li><strong>Weapons Policy:</strong> All weapons are strictly prohibited in our facility at all times.</li>
<li><strong>Pet Policy:</strong> The Company welcomes service animals while in the company of the disabled individual or a service animal trainer. The Company does request the service animal must remain harnessed or on a leash at all times. Appropriate paperwork certifying the need for a service animal must be provided to the Company prior to the service animal being allowed on the premises.</li>
<li><strong>Spectator Policy:</strong> Only registered students under the supervision of an instructor are permitted to enter the designated instruction areas. Spectators are welcome to watch our classes and events from the designated viewing areas only. Spectators must always remain in the designated viewing area and should not enter the Gym floor. Parents or guardians are responsible for always supervising their children while in the viewing area. Spectators are not allowed to coach or give instructions to any gymnasts during classes.</li>
<li><strong>Pick up/Drop off:</strong> Students cannot be dropped more than five minutes before the start of their class and must be picked up at their scheduled class end time. Your child cannot be picked up outside the facility \u2013 all parents/guardians are requested to enter the Gym to pick up their child.</li>
</ul>

<h2>CODE OF CONDUCT</h2>
<p>The goal of the Company is to provide a safe, healthy, and positive environment for everyone. In order to accomplish this goal, the family\u2019s observation of the following guidelines is required:</p>
<ol>
<li>The family will place the emotional, physical, health, safety, and overall wellbeing of the athlete above any desire to win.</li>
<li>The family must show respect for all Gym staff, parents and observers, and other students. The Company strives to provide a positive and uplifting experience for all people in the facility, and requires everyone, including me/child, to contribute to this environment.</li>
<li>The family must respect everyone\u2019s personal space, including that of other students. Family cannot touch or otherwise physically contact others while in the facility. Unwanted contact can make people feel unsafe or uncomfortable and is not permitted.</li>
<li>The family must use appropriate language and behavior while in the facility. Inappropriate conduct can make others feel uncomfortable and is not permitted.</li>
<li>The family must always listen to and follow the instructions of their coach and all other members of the Company\u2019s staff while in the facility. The family cannot interfere with others\u2019 ability to follow instructions. Improper participation in gymnastics, parkour, ninja warrior, or any other activity within the Gym and failure to follow instructions from staff can create risk of injury to me/minor participant or other students in the facility.</li>
<li>My child must always stay with their assigned class and coach within the class\u2019s active area of instruction unless granted specific authorization by a member of the staff (i.e., child needing to use the restroom). Failure to stay with the group or within their designated area could create risk for me, my child, and/or other students.</li>
<li>The family will be a role model of good sportsmanship and character and will abide by all the rules and policies set forth by the Company.</li>
</ol>

<p>All participants, including family members and spectators, must comply with this Code of Conduct. Failure to comply with this Code of Conduct may result in dismissal from the Gym, termination of membership with the Company, and/or eventual discontinuation from future participation.</p>

<h2>ATHLETE SAFETY &amp; REPORTING POLICY</h2>
<p>Every athlete has the right to train and compete safely. USA Gymnastics (\u201CUSAG\u201D) and the US Center for SafeSport (\u201CSafeSport\u201D) have established and continually updated policies governing rules and regulations for participants. These update policies are available on each organization\u2019s website (<a href="http://www.usagym.org">www.usagym.org</a> and <a href="http://www.uscenterforsafesport.org">www.uscenterforsafesport.org</a>). This Gym is committed to fostering a culture that actively works to prevent the opportunity for abuse to occur by meeting or exceeding the requirements set forth by these organizations. These policies stipulate mandatory reporting by adult athletes, coaches, and other gymnastics participants (including parents of youth athletes) and set boundaries of interactions between participants through prevention policies.</p>
<p>Any adult with regular contact and/or authority over a minor must pass a background check and complete SafeSport training before initial contact with minor athletes and as an ongoing process. USAG Athlete members who turn 18 are also required to complete SafeSport education as a condition of their participation. Parents of youth athletes and athletes themselves are encouraged to complete optional training provided by SafeSport focused on recognizing, reporting, and preventing abuse and misconduct. These trainings are found below within this Policy.</p>
<p><strong>Duty to Report:</strong> Any adult under USA Gymnastics\u2019 jurisdiction must report child abuse, including sexual misconduct. This requirement begins when an adult learns of facts that give reason to suspect any child has suffered an incident of Child Abuse or that adult is informed of an allegation of Child Abuse. The term \u201Cchild\u201D is not limited to athletes and includes any child. Reports must be made immediately both to relevant government agencies and SafeSport. Non-sexual misconduct must be reported to USAG or SafeSport when the adult becomes aware of it. If an individual is unsure about reporting, they should seek guidance from the local police department, department of child services, or child advocacy center. These authorities will understand the law in their jurisdiction. As best practice, the member should document the date, time, name of the local police department contacted, name of the officer, and the officer\u2019s badge number as confirmation of their efforts. Note: Child Abuse, and the failure to report Child Abuse are both Prohibited Conduct under the SafeSport Code.</p>
<p>Again, all USAG members 18 years old and older are mandatory reporters and are required to report all instances of possible child abuse or neglect to law enforcement and state child services. Reports of sexual abuse or sexual misconduct must be made immediately. No one should investigate or attempt to evaluate the credibility or validity of such reports.</p>
<p><strong>Where to report child abuse or neglect in the State:</strong></p>
<ul>
<li>National Child Abuse Hotline 1-800-422-4453</li>
<li>For a director on your specific state\u2019s child abuse hotline, please visit the following link: <a href="https://childhelphotline.org/">https://childhelphotline.org/</a></li>
<li>If in doubt, please contact your local law enforcement agency (or dial 9-1-1)</li>
</ul>
<p><strong>Prevention Policies</strong> are in place to set boundaries on the interactions between Adult and Minor participants:</p>
<ul>
<li>All one-on-one contact between adult and minor participants must be observable and interruptible, including training, travel, and conversations.</li>
<li>Parents are permitted to view all practices from the viewing mezzanine. Appropriate behavior is required of all observers.</li>
<li>Adult participants will not transport a minor athlete one-on-one in a vehicle alone.</li>
<li>Adult participants will not share lodging with minor athletes.</li>
<li>All electronic communication between Adult participants and Minor athletes, including email, social media and any virtual training, must be open, transparent, and professional in nature.</li>
<li>Any photos or videos of minor athletes must be taken in public view, observe standards of decency, and appropriately serve the best interest of the athlete.</li>
<li>Adult participants are not permitted to be alone with a minor athlete in a locker room, changing area, or restroom.</li>
<li>Personal or individual gifts are not permitted to be given to athletes by Adult participants.</li>
<li>All medical modalities, situations, or treatments for athletes must be observable and interruptible with a minimum of 2 Adult participants physically present. Medical duties beyond immediate pain mitigation should be performed by a licensed professional. Coaches may not massage minor athletes.</li>
<li>All restrictions from a medical professional for athletes experiencing pain and/or injury will be adhered to, including time frame, modifications, and alternative exercises.</li>
</ul>
<p>Please review the full policy documents available on the websites of USAG and SafeSport for more information on these matters.</p>
<p><strong>Training for Parents and Youth Athletes:</strong> The Company and USAG encourage all parents to take useful steps to prevent abuse and misconduct. SafeSport has designed a free course for parents of youth athletes titled, \u201CParents Guide to Misconduct in Sport.\u201D This course focuses on recognizing, responding to, and preventing abuse and misconduct in their child\u2019s sport setting. Parents will come away equipped with information and tactics to minimize risks of harm to their children. To access the Center\u2019s training for parents, please visit <a href="https://safesporttrained.org/#/public-dashboard">https://safesporttrained.org/#/public-dashboard</a>. Parents are also encouraged to enroll their child in a very important course designed by SafeSport titled, \u201CSafeSport for High School Athletes.\u201D This short 15-minute course focuses on bullying and hazing prevention, supporting friends who have experienced sexual abuse or misconduct, and resources for reporting. To access the Center\u2019s training athletes, please visit <a href="https://safesporttrained.org/#/public-dashboard">https://safesporttrained.org/#/public-dashboard</a>. Additionally, you may receive a copy of USA Gymnastics: Sports Concussion Overview for your review. This document can also be obtained at the following link: <a href="https://static.usagym.org/PDFs/About%20USA%20Gymnastics/wellness/concussion_overview.pdf">https://static.usagym.org/PDFs/About%20USA%20Gymnastics/wellness/concussion_overview.pdf</a></p>
<h2>Questions, Concerns, Feedback</h2>
<p><strong>Contact the front desk</strong> if you have questions or concerns about:</p>
<ul>
<li>Athlete progress</li>
<li>Program information</li>
<li>Facility information</li>
<li>Financial issues</li>
</ul>
<p><strong>Contact USAG</strong> if you have questions or concerns about:</p>
<ul>
<li>Emotional misconduct</li>
<li>Bullying</li>
<li>Hazing</li>
<li>Physical misconduct</li>
<li>Retaliation related to SafeSport</li>
<li>Prevention Policy violations</li>
</ul>
<p><strong>USA Gymnastics contact information:</strong></p>
<ul>
<li><a href="https://usagym.i-sight.com/portal">https://usagym.i-sight.com/portal</a> (reporting portal)</li>
<li>(833) 844-7233</li>
<li>usagym.org</li>
</ul>
<p><strong>Contact US Center for SafeSport</strong> if you have questions or concerns about:</p>
<ul>
<li>Sexual misconduct</li>
<li>Criminal charges or dispositions involving child abuse or sexual misconduct</li>
<li>Aiding and abetting as it relates to the Center\u2019s process</li>
<li>Other inappropriate conduct as defined in the SafeSport Code</li>
</ul>
<p><strong>US Center for SafeSport contact information:</strong></p>
<ul>
<li>(833) 587-7233</li>
<li><a href="https://uscenterforsafesport.org/report-a-concern/">https://uscenterforsafesport.org/report-a-concern/</a></li>
</ul>
<p><strong>Contact local law enforcement agency</strong> regarding any instances of:</p>
<ul>
<li>Child abuse</li>
<li>Sexual abuse or criminal activities involving a minor</li>
</ul>

<h2>PHOTO &amp; VIDEO RELEASE</h2>
<p>By accepting or signing this Policies and Procedures agreement, I (\u201CParent/Legal Guardian\u201D or \u201CParticipant\u201D), on behalf of myself (and my Participant child(ren), if applicable), hereby give my consent to waive my rights against, indemnify, hold harmless, and release the Company from liability regarding the following set forth in this Photo &amp; Video Release section:</p>
<p>I give the Company authority (\u201CAuthority\u201D) to (i) film, record, and photograph my (and my Participant child(ren), if applicable) name, image, likeness, and voice on a video, audio, photographic, digital, electronic, or any other medium (\u201CRecording(s)\u201D); and (ii) use, reproduce, exhibit, or distribute the Recording(s) in whole or in part in perpetuity in any and all media throughout the universe (including, but not limited to, print and digital publications, video tapes, non-theatrical, home video, CD-ROM, internet, social media, digital media, and any other electronic or other medium presently in existence or invented in the future) for any lawful purpose that the Company and those acting pursuant to its authority deem appropriate, including but not limited to promotional, periodicals, recruiting, advertising, marketing campaign, press releases, handbooks, manuals, trainings, website, and any commercial or non-commercial use (\u201CUse\u201D). I waive any right to review, inspect, edit, or approve such Recording(s) or its Use now or in the future, whether that use is known or unknown to me, and I understand that I shall not receive any compensation as a result of its Use. I understand and agree that all such Recording(s) shall remain the property of the Company.</p>
<p>I hereby waive any rights I may have and thereby release, indemnify, and hold harmless the Company from and against any and all claims, demands, actions, causes of actions, suits, costs, expenses, liabilities, and damages whatsoever that I may have from liability for any violation of any personal or proprietary right I may have in connection with the Recording(s) and the Use of my likeness, voice, or name in any medium, and expressly waive any rights to privacy I may have under the Family Educational Rights and Privacy Act (\u201CFERPA\u201D); Federal, State, Local, and/or any other applicable law; and that this Release is in compliance with each company\u2019s Privacy Notice and the Regulation (EU) 2016/679 (General Data Protection Regulation) (\u201CGDPR\u201D).</p>

<h2>DISPUTE RESOLUTION</h2>
<p><strong>PLEASE REVIEW THIS SECTION CAREFULLY AS IT CONTAINS A MULTI-TIERED DISPUTE RESOLUTION PROCESS, WHICH WE BELIEVE WILL ASSIST US EFFECTIVELY AND EFFICIENTLY RESOLVE ANY DISPUTES THAT MAY ARISE BETWEEN US. BY AGREEING TO THESE TERMS, YOU ARE AGREEING TO FOLLOW THE DISPUTE RESOLUTION PROCESS DESCRIBED BELOW TO RESOLVE ANY DISPUTES BETWEEN US. IN DOING SO, YOU ARE AGREEING TO FINAL AND BINDING ARBITRATION THAT LIMITS YOUR RIGHTS TO BRING AN ACTION IN COURT AND HAVE DISPUTES DECIDED BY A JUDGE OR JURY.</strong></p>
<p><strong>(a). Voluntary Participation.</strong> Your agreement to the dispute resolution process described herein is voluntary and not necessary to obtain any services or products from us. If you do not agree to use the process, you may opt out of this part of our agreement by sending an email to <strong>info@${gym.domain}</strong> with \u201COpt Out of Dispute Resolution Agreement\u201D in the subject line. This email must be sent within 14 days of enrollment. To the fullest extent provided by law, your agreement includes the \u201CReleasors\u201D as defined in \u201CRelease of Liability, Waiver of Claims, Assumption of Risk, Indemnity, Medical Certification, and Consent to Medical Treatment Agreement.\u201D Your agreement to these terms and conditions and decision not to opt out of the process is your agreement to use the dispute resolution processes described herein, which is a material term of our agreement to provide you services or products.</p>
<p><strong>(b). Scope.</strong> A \u201CDispute\u201D means any dispute, claim, or controversy (except those specifically exempted below) between us that in any way relates to or arises from any aspect of our relationship, including, without limitation, your use or attempted use of our website, customer portal, services or products we provide, and all matters relating to or arising from this agreement, including the formation, interpretation, performance, breach, termination, or validity of our agreement. A Dispute shall be subject to the process herein, regardless of whether it is based in contract, statute, regulation, ordinance, tort (including fraud, misrepresentation, fraudulent inducement, or negligence), or any other legal or equitable theory. This includes any Dispute that accrued before entering into this agreement. You further agree that our agreement shall be governed by the Federal Arbitration Act and federal arbitration law.</p>
<p><strong>(c). Tier 1: Negotiation.</strong> Our General Manager, or his or her designee, is available in person, by phone or by email to address any concerns you may have regarding our services or products. Most concerns are quickly resolved in this manner to our customers\u2019 satisfaction. In an effort to accelerate resolution and reduce the cost of any Dispute between us, you and we agree to personally meet and confer telephonically or via videoconference in a good-faith effort to resolve informally any Dispute. If you are represented by counsel, your counsel may participate in the conference, but you must also participate in the conference, as will at least one of our corporate representatives. This tier is a necessary and mandatory precondition to mediation and binding arbitration and by entering into this agreement, you and we are representing that we have unconditionally agreed to follow this initial negotiation process to attempt to resolve any Dispute except as set forth herein. The parties are not required to proceed in this Tier 1 should both parties agree in a signed writing that negotiation would be \u201Cfutile.\u201D When one party believes that negotiation could be productive, then negotiation is not futile and the parties must proceed through this Tier 1 before proceeding to Tier 2. To initiate negotiation, the initiating party shall give written notice to the other party by certified mail, return receipt requested (and by sending a courtesy copy by email to <strong>info@${gym.domain}</strong>). The notice must describe the Dispute, explain the facts of the Dispute as the initiating party understands them, and inform the other party what is being requested to resolve the Dispute. A notice will not be valid, will not commence the time period for this tier, and will not allow a party to proceed to Tier 2 and Tier 3 unless the notice contains all of the information required by this paragraph. The designated negotiation representatives shall have ten (10) business days after such notice is received by certified mail to meet (in person or virtually) to negotiate in good faith and attempt to resolve the Dispute. The parties may agree to extend the negotiation period by mutual consent. \u201CGood faith\u201D means participating actively in negotiations and refraining from engaging in tactics intended to delay, obstruct, or prevent resolution; provided, however, that \u201Cgood faith\u201D shall not require a party to resolve the Dispute if a party believes that the proposed resolution is not reasonable or if a party is not able to comply with the resolution. Should a party not participate in good-faith negotiation, that party will waive any right to recover attorneys\u2019 fees, costs, and multiple or punitive damages in arbitration.</p>
<p><strong>(d). Tier 2: Mediation.</strong> If the Dispute is not resolved through negotiation, or if negotiation is deemed futile (as defined above), a party wanting to pursue dispute resolution shall submit the Dispute to non-binding mediation, wherein the parties will, in good faith (as defined above), attempt to resolve the Dispute with a mediator. The parties will not be required to proceed in this Tier 2 should both parties agree in a signed writing that mediation would be futile (as defined above). Also, this tier does not apply to any Dispute that fall within the jurisdiction of any \u201CSmall Claims\u201D court in the area in which the services or products were provided (\u201CSmall Claims\u201D). For Small Claims, neither party is required to request or agree to mediation. For all other Disputes, this tier is a necessary and mandatory precondition to binding arbitration and by entering into this agreement, you are representing that you have unconditionally agreed to use mediation to attempt to resolve the Dispute except as provided herein. The mediation shall be conducted in accordance with the Consumer Mediation Procedures and Costs Rules of the American Arbitration Association. The parties shall mutually agree to a mediator and, if they are not able to agree, the mediator shall be selected by the American Arbitration Association. To initiate mediation, a party shall give written notice to the other party by certified mail, return receipt requested (and by sending a courtesy copy by email to <strong>info@${gym.domain}</strong>). The parties shall have thirty (30) calendar days after such notice is received by certified mail to schedule the mediation. The parties may agree to extend the mediation period by mutual consent. The mediation shall be held in the American Arbitration Association office nearest to the location of the school at which the lessons were provided, unless the parties otherwise agree to another location or to conduct the mediation virtually. The parties shall share the mediator\u2019s fees and all other mediation costs equally. Should a party not participate in good faith mediation, that party will waive any rights to recover attorneys\u2019 fees, costs, and multiple or punitive damages in arbitration.</p>
<p><strong>(e). Tier 3: Arbitration.</strong> If a Dispute cannot be resolved through mediation within thirty (30) calendar days after the initiation of mediation (or as extended by the parties), if the parties decided not to pursue mediation (as set forth above), then a party wanting to pursue dispute resolution shall do so exclusively through binding arbitration, unless provided otherwise herein. By entering into our agreement, you are representing that you have unconditionally agreed to use arbitration to resolve the Dispute. The arbitration will be administered by JAMS in accordance with the JAMS Streamlined Arbitration Rules and Procedures (the \u201CJAMS Rules\u201D) effective as of the date of the initial notice of dispute, which rules are available at the JAMS website, <a href="http://www.jamsadr.com/rules-streamlined-arbitration">http://www.jamsadr.com/rules-streamlined-arbitration</a>. Also, the following terms and conditions apply to arbitration:</p>
<ol>
<li>The arbitrator shall be empowered to grant whatever relief would be available in a court under law or in equity.</li>
<li>The arbitrator will provide a written award, but need not provide a \u201Creasoned award\u201D unless requested by a party before the arbitration hearing commences. The arbitrator\u2019s award shall be final and binding and may be entered in any court of competent jurisdiction. The parties\u2019 rights to recover attorneys\u2019 fees, costs and arbitration fees, if any, shall be governed by the laws that apply to the Dispute, as well as any applicable arbitration rules.</li>
<li>The arbitrator shall determine the scope and enforceability of this agreement, including whether a Dispute is subject to dispute resolution as provided above, except as set forth in the exceptions below. The arbitrator has authority to decide all issues of validity, enforceability or arbitrability, including, but not limited to, where a party raises as a defense that any portion of this agreement is not enforceable, subject to the exceptions below. If a lawsuit filed in court includes claims or requests for relief that are arbitrable and claims or requests for relief that are not, you and we agree that any non-arbitrable claims or requests for relief shall be stayed pending the completion of the arbitration of the arbitrable claims or requests for relief.</li>
<li>The following exceptions to arbitration shall apply:
  <ol type="a">
  <li><strong>Intellectual Property, Trade Secret, and Moral Rights Claims.</strong> Notwithstanding the parties\u2019 decision to resolve all disputes through arbitration, either party may bring an action in state or federal court that only asserts claims for patent infringement or invalidity, copyright infringement, piracy, moral rights violations, trademark infringement, and/or trade secret misappropriation.</li>
  <li><strong>Small Claims.</strong> Either party may also seek relief in a small claims court for any individual disputes or claims within the scope of that court\u2019s jurisdiction. If an arbitration is filed, before the arbitrator is formally appointed either party can send written notice to the opposing party and the applicable arbitration provider that it wants the case decided by a small claims court, after which the arbitration provider shall close the case (with no fees due or payable by either party to the arbitration provider). Any dispute about whether a claim qualifies for small claims court will be resolved by that court, not by the arbitrator. Seeking such relief shall not waive a party\u2019s right to arbitration under this agreement, and any filed arbitrations related to any action filed pursuant to this paragraph shall automatically be stayed (with no fees due or payable by either party to the arbitration provider) pending the outcome of such action.</li>
  <li><strong>Mass Arbitration Before National Arbitration and Mediation (\u201CNAM\u201D):</strong> Notwithstanding the parties\u2019 decision to have arbitrations administered by JAMS, if 25 or more demands for arbitration are filed relating to the same or similar subject matter and sharing common issues of law or fact, and counsel for the parties submitting the demands are the same or coordinated, you and we agree that this will constitute a \u201CMass Arbitration.\u201D If a Mass Arbitration is commenced, you and we agree that it shall not be governed by JAMS Rules or administered by JAMS. Instead, a Mass Arbitration shall be administered by NAM, and governed by the NAM Rules in effect when the Mass Arbitration is filed, excluding any rules that permit arbitration on a class-wide basis (the \u201CNAM Rules\u201D), and under the rules set forth in this agreement. The NAM Rules are available at <a href="https://namadr.com/resources/rules-fees-forms/">https://namadr.com/resources/rules-fees-forms/</a> or by calling 1-800-358-2550. You and we agree that the Mass Arbitration shall be resolved using NAM\u2019s Mass Filing Supplemental Dispute Resolution Rules and Procedures, available at <a href="https://www.namadr.com/">https://www.namadr.com/</a>. Before any Mass Arbitration is filed with NAM, you and we agree to contact NAM jointly to advise that the parties intend to use NAM\u2019s Mass Filing Supplemental Dispute Resolution Rules and Procedures. The individual demands comprising the Mass Arbitration shall be submitted on NAM\u2019s claim form(s) and as directed by NAM. You and we agree that if either party fails or refuses to commence the Mass Arbitration before NAM rather than JAMS, you or we may seek an order from JAMS compelling compliance and directing administration of the Mass Arbitration before NAM. Pending resolution of any such requests, you and we agree that all arbitrations comprising the Mass Arbitration (and any obligation to pay arbitration fees) shall be stayed. If for any reason the provisions in this paragraph are found to be unenforceable, or if for any reason NAM declines to administer the Mass Arbitration, then the Disputes comprising the Mass Arbitration shall be administered by the AAA consistent with the provisions of the Dispute Resolution Section of these Terms of Use and in accordance with AAA Rules in effect when the Mass Arbitration is filed, including the AAA Supplementary Rules for Multiple Case Filings, available at <a href="https://adr.org">https://adr.org</a>.</li>
  </ol>
</li>
<li><strong>Class and Collective Action Waiver. TO THE FULLEST EXTENT ALLOWED BY APPLICABLE LAW, EACH PARTY MAY BRING DISPUTES AGAINST THE OTHER PARTY ONLY IN AN INDIVIDUAL CAPACITY, AND NOT AS A CLASS ACTION, A COLLECTIVE ACTION, A CLASS ARBITRATION, OR IN ANY REPRESENTATIVE CAPACITY OR AS A PRIVATE ATTORNEY GENERAL.</strong> To the extent applicable law does not permit waiver of private attorney general rights, but permits them to be arbitrated, then such claims shall be resolved by arbitration.</li>
</ol>
<p><strong>(f). Confidentiality.</strong> All negotiations, mediations, and arbitration proceedings under this clause shall be confidential. Neither party shall disclose any information concerning any Dispute except to the extent necessary for enforcement of rights, as required by law, or with the express written consent of the parties.</p>
<p><strong>(g). Choice of Law/Tolling Clause.</strong> This clause shall be governed by the laws of the State of Texas regardless of conflict of law principles. To the extent the processes above would prevent a party from filing a claim for arbitration or initiating a lawsuit within an applicable statute of limitations or statute of repose period, the parties agree that such limitation periods will be tolled from the day a party first notifies the other party of a Dispute and requests negotiation, as set forth above, to the date the parties are not able to resolve their dispute through mediation (\u201CTolling Period\u201D). Also, the parties agree not to use the Tolling Period as a basis to support any defense or argument concerning delay in asserting an arbitration or litigation claim, including, without limitation, any defense or arguments arising from the doctrine of laches.</p>
<p><strong>(h). Dispute Resolution: Severance.</strong> If any provision in this agreement is found to be unenforceable, that provision shall be severed with the remainder of this agreement remaining in full force and effect. The foregoing shall not apply to \u201CClass and Collective Action Waiver\u201D above. This means that if the \u201CClass and Collective Action Waiver\u201D above is found to be unenforceable for any reason, this \u201CDispute Resolution\u201D section of our agreement shall be null and void.</p>

<p>I represent and warrant that if I am purchasing something from <strong>${gym.name}</strong> that (i) any credit or bank account draft (ACH Draft) information I supply is true and complete, (ii) charges incurred by me will be honored by my credit card company or financial institution, and (iii) I will pay the charges incurred by me at the posted prices, including any applicable taxes, fees, and penalties. I acknowledge that a $10 handling charge will be incurred for any declined transactions and are payable before any further services are given.</p>
<p>I hereby authorize this facility to charge my bank or credit card account for each month\u2019s tuition and fees. I acknowledge that payment for lessons is non-refundable as stated in the Refund Policy of which I have executed as well. I understand that upon entering into this agreement, I agree to be liable for and pay each month\u2019s tuition and fees. Should I dispute a charge through my financial institution, this will constitute a breach of contract possibly resulting in, but not limited to, penalties, additional fees, collection, legal action, and/or termination of any and/or all current and future services.</p>
<p><strong>${gym.name}</strong> reserves the right to modify, update, or change any portion of this Billing Agreement at its sole discretion. Continued enrollment in our classes following the effective date of the modifications will constitute your acceptance of the revised terms. If you do not agree with any of the changes, please contact us promptly to discuss your options.</p>

<p><strong>I acknowledge that I have read and accepted the general and financial policies as stated here. I understand that upon enrollment I am entering into a binding financial agreement with ${gym.name}.</strong></p>

<div class="sig-area">
  <div style="flex:2;"><div class="sig-line">&nbsp;</div><div class="sig-label">Parent/Guardian Signature</div></div>
  <div style="flex:1;"><div class="sig-line">&nbsp;</div><div class="sig-label">Date</div></div>
</div>
<div style="margin-top:8px;">
  <div class="sig-line" style="border-bottom:1px solid #000;width:60%;padding-bottom:2px;">&nbsp;</div>
  <div class="sig-label">Printed Name</div>
</div>`;
}

/* ═══════════════ BACK TO GRID ═══════════════ */
function showGrid() {
  document.getElementById('viewer').classList.remove('active');
  document.getElementById('gymGrid').classList.remove('hidden');
  document.getElementById('gridTitle').style.display = '';
  document.getElementById('backBtn').style.display = 'none';
  document.getElementById('bulkDlBtn').classList.remove('hidden');
  currentGym = null;
  updatePageTitle();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ═══════════════ TOAST ═══════════════ */
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

/* ═══════════════ INIT ═══════════════ */
buildGrid();
</script>

<!-- CDN Libraries for Bulk Download -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
/* ═══════════════════════════════════════════════════════
   BULK DOWNLOAD ENGINE
   Generates PDFs via html2canvas + jsPDF, bundles via JSZip
   ═══════════════════════════════════════════════════════ */

/* ── Modal Controls ── */
function openBulkModal() {
  buildBulkGymList();
  document.getElementById('bulkProgressArea').style.display = 'none';
  document.getElementById('bulkDownloadBtn').disabled = false;
  resetBulkDownloadBtn();
  document.getElementById('bulkModalOverlay').classList.add('open');
}

function closeBulkModal() {
  document.getElementById('bulkModalOverlay').classList.remove('open');
}

function closeBulkModalIfOverlay(e) {
  if (e.target === document.getElementById('bulkModalOverlay')) closeBulkModal();
}

document.addEventListener('keydown', e => {
  if (e.key === 'Escape') closeBulkModal();
});

function resetBulkDownloadBtn() {
  const btn = document.getElementById('bulkDownloadBtn');
  btn.innerHTML = `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
    Download ZIP
  `;
}

function buildBulkGymList() {
  const list = document.getElementById('bulkGymList');
  list.innerHTML = GYMS.map((g, i) => `
    <label class="bulk-gym-row checked" id="bulkGymRow_${i}">
      <div class="gym-color-dot" style="background:${g.color}"></div>
      <div class="gym-row-name">${g.name}</div>
      <span class="gym-row-abbr">${g.abbr}</span>
      <input type="checkbox" class="bulk-gym-checkbox" id="bulkCheck_${i}" checked onchange="updateBulkRowStyle(${i})">
    </label>
  `).join('');
}

function updateBulkRowStyle(i) {
  const cb = document.getElementById('bulkCheck_' + i);
  const row = document.getElementById('bulkGymRow_' + i);
  row.classList.toggle('checked', cb.checked);
}

function bulkSelectAll(checked) {
  GYMS.forEach((_, i) => {
    document.getElementById('bulkCheck_' + i).checked = checked;
    document.getElementById('bulkGymRow_' + i).classList.toggle('checked', checked);
  });
}

/* ── Progress Bar ── */
function setProgress(pct, label) {
  document.getElementById('bulkProgressBarFill').style.width = pct + '%';
  document.getElementById('bulkProgressLabel').textContent = label;
}

/* ── Color Utilities ── */
function hexMix(hexA, hexB, fractionA) {
  function parseHex(hex) {
    const h = hex.replace('#', '');
    const full = h.length === 3 ? h.split('').map(c => c + c).join('') : h;
    return [
      parseInt(full.substring(0, 2), 16),
      parseInt(full.substring(2, 4), 16),
      parseInt(full.substring(4, 6), 16)
    ];
  }
  const [r1, g1, b1] = parseHex(hexA);
  const [r2, g2, b2] = parseHex(hexB);
  const r = Math.round(r1 * fractionA + r2 * (1 - fractionA));
  const g = Math.round(g1 * fractionA + g2 * (1 - fractionA));
  const b = Math.round(b1 * fractionA + b2 * (1 - fractionA));
  return 'rgb(' + r + ', ' + g + ', ' + b + ')';
}

/* ── Wait for images to load ── */
function waitForImages(container) {
  const images = Array.from(container.querySelectorAll('img'));
  if (images.length === 0) return Promise.resolve();
  const timeout = new Promise(resolve => setTimeout(resolve, 5000));
  const allLoaded = Promise.all(images.map(img => {
    if (img.complete && img.naturalWidth > 0) return Promise.resolve();
    return new Promise(resolve => { img.onload = resolve; img.onerror = resolve; });
  }));
  return Promise.race([allLoaded, timeout]);
}

/* ── Generate a single PDF for one gym + doc type ── */
async function generateGymPDF(gym, docType) {
  const container = document.getElementById('bulkRenderContainer');

  // Resolve colors that html2canvas can't handle (CSS vars + color-mix)
  const warningColor = WARNING_COLOR_OVERRIDES[gym.abbr] || gym.color2 || gym.color;
  const policyIntroBg = hexMix(gym.color2 || gym.color, '#ffffff', 0.15);

  // Build the page div — CSS class .bulk-render-page handles ALL sizing
  // (mirrors @media print rules as regular screen CSS)
  const pageDiv = document.createElement('div');

  if (docType === 'waiver') {
    pageDiv.className = 'page waiver bulk-render-page';
    pageDiv.innerHTML = getWaiverHTML(gym);
  } else {
    pageDiv.className = 'page policy bulk-render-page';
    pageDiv.innerHTML = getPolicyHTML(gym);
  }

  // Only inline things html2canvas truly can't resolve:
  // 1) CSS custom property values (var(--gym-color) etc.)
  // 2) color-mix() results

  // h1 color
  pageDiv.querySelectorAll('h1').forEach(function(el) {
    if (!el.style.color) el.style.color = gym.color;
  });

  // Warning box colors
  var warningEl = pageDiv.querySelector('.warning');
  if (warningEl) {
    warningEl.style.color = warningColor;
    warningEl.style.borderColor = warningColor;
  }

  // Policy intro box colors + color-mix background
  if (docType === 'policy') {
    var policyIntroColor = POLICY_INTRO_COLOR_OVERRIDES[gym.abbr] || gym.color2 || gym.color;
    var policyIntroEl = pageDiv.querySelector('.policy-intro');
    if (policyIntroEl) {
      policyIntroEl.style.background = policyIntroBg;
      policyIntroEl.style.borderColor = policyIntroColor;
      policyIntroEl.style.color = policyIntroColor;
    }
  }

  // Place in off-screen container
  container.innerHTML = '';
  container.appendChild(pageDiv);

  // Wait for logo images to load
  await waitForImages(container);

  // Small delay to let browser paint
  await new Promise(r => setTimeout(r, 100));

  // Capture with html2canvas at the printable area width (726px)
  const canvas = await html2canvas(pageDiv, {
    scale: 2,
    useCORS: true,
    allowTaint: true,
    backgroundColor: '#ffffff',
    logging: false,
    windowWidth: 726,
    width: 726
  });

  // Convert canvas to multi-page PDF
  const pdf = buildPDFFromCanvas(canvas);

  // Cleanup
  container.innerHTML = '';

  return pdf.output('arraybuffer');
}

/* ── Slice canvas into letter-page-sized PDF ── */
function buildPDFFromCanvas(canvas) {
  const { jsPDF } = window.jspdf;

  // PDF page dimensions in points (letter)
  const PDF_WIDTH_PT = 612;   // 8.5in * 72
  const PDF_HEIGHT_PT = 792;  // 11in * 72

  // Margins in points (0.47in * 72 = 33.84pt)
  const MARGIN_PT = 33.84;

  // Printable area in points
  const CONTENT_WIDTH_PT = PDF_WIDTH_PT - (MARGIN_PT * 2);   // 544.32pt
  const CONTENT_HEIGHT_PT = PDF_HEIGHT_PT - (MARGIN_PT * 2); // 724.32pt

  // Canvas dimensions (html2canvas at scale 2)
  const canvasWidth = canvas.width;
  const canvasHeight = canvas.height;

  // Printable height in canvas pixels: 966px at scale 2 = 1932px
  const pageHeightPx = 966 * 2;

  const totalPages = Math.ceil(canvasHeight / pageHeightPx);

  const pdf = new jsPDF({
    orientation: 'portrait',
    unit: 'pt',
    format: 'letter'
  });

  for (let page = 0; page < totalPages; page++) {
    if (page > 0) pdf.addPage('letter', 'portrait');

    const srcY = page * pageHeightPx;
    const srcHeight = Math.min(pageHeightPx, canvasHeight - srcY);

    // Create a temp canvas for this page slice
    const pageCanvas = document.createElement('canvas');
    pageCanvas.width = canvasWidth;
    pageCanvas.height = pageHeightPx;
    const ctx = pageCanvas.getContext('2d');

    // Fill white so last page doesn't have black at bottom
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, pageCanvas.width, pageCanvas.height);

    // Copy the slice
    ctx.drawImage(
      canvas,
      0, srcY, canvasWidth, srcHeight,
      0, 0, canvasWidth, srcHeight
    );

    // Add to PDF — place content within the 0.47in margins
    const imgData = pageCanvas.toDataURL('image/jpeg', 0.92);
    pdf.addImage(imgData, 'JPEG', MARGIN_PT, MARGIN_PT, CONTENT_WIDTH_PT, CONTENT_HEIGHT_PT);
  }

  return pdf;
}

/* ── Main Bulk Download Orchestrator ── */
async function startBulkDownload() {
  // Guard: check libraries loaded
  if (typeof window.jspdf === 'undefined' || typeof html2canvas === 'undefined' || typeof JSZip === 'undefined') {
    showToast('PDF libraries not loaded. Check internet connection.');
    return;
  }

  // Gather selections
  const selectedGymIndices = GYMS
    .map((_, i) => i)
    .filter(i => document.getElementById('bulkCheck_' + i).checked);

  if (selectedGymIndices.length === 0) {
    showToast('Select at least one gym.');
    return;
  }

  const docTypeRadio = document.querySelector('input[name="bulkDocType"]:checked');
  const docType = docTypeRadio ? docTypeRadio.value : 'both';
  const docTypes = docType === 'both' ? ['waiver', 'policy'] : [docType];

  const totalJobs = selectedGymIndices.length * docTypes.length;
  let completedJobs = 0;

  // Disable UI, show progress
  const btn = document.getElementById('bulkDownloadBtn');
  btn.disabled = true;
  btn.textContent = 'Generating...';
  document.getElementById('bulkProgressArea').style.display = 'block';
  setProgress(0, 'Initializing...');

  const zip = new JSZip();

  try {
    for (const gymIdx of selectedGymIndices) {
      const gym = GYMS[gymIdx];
      for (const doc of docTypes) {
        const label = doc === 'waiver' ? 'Release & Waiver' : 'Policies & Procedures';
        setProgress(
          Math.round((completedJobs / totalJobs) * 100),
          'Generating: ' + gym.name + ' \u2014 ' + label + '...'
        );

        const pdfBytes = await generateGymPDF(gym, doc);
        const fileName = gym.name + ' - ' + label + '.pdf';
        zip.file(fileName, pdfBytes);

        completedJobs++;
        setProgress(
          Math.round((completedJobs / totalJobs) * 100),
          'Done: ' + gym.name + ' \u2014 ' + label
        );
      }
    }

    // Generate ZIP
    setProgress(100, 'Compressing ZIP...');
    const zipBlob = await zip.generateAsync({ type: 'blob' });

    // Trigger download
    const url = URL.createObjectURL(zipBlob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'Gym_Documents.zip';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    setTimeout(function() { URL.revokeObjectURL(url); }, 5000);

    setProgress(100, 'Download ready!');
    setTimeout(function() {
      closeBulkModal();
      showToast('ZIP downloaded successfully!');
      resetBulkDownloadBtn();
      btn.disabled = false;
    }, 800);

  } catch (err) {
    console.error('Bulk download failed:', err);
    setProgress(0, 'Error \u2014 see console for details.');
    btn.disabled = false;
    resetBulkDownloadBtn();
    showToast('An error occurred. Check console.');
  }
}
</script>
</body>
</html>
